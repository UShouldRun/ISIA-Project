services:
  spade_server:
    image: ${IMAGE_NAME}
    container_name: ${CONTAINER_NAME}
    env_file:
      - ./.env
    environment:
      - SPADE_ADMIN_PORT=${SPADE_ADMIN_PORT}
    ports:
      - "${SPADE_ADMIN_PORT}:${SPADE_ADMIN_PORT}"
      - "8080:8080"
    volumes:
      - ./src:/app/src
      - ./sims:/app/sims
    restart: unless-stopped

  spade_web:
    image: python:3.12-slim
    working_dir: /app
    volumes:
      - ./public:/app
    command: python -m http.server ${CLIENT_PORT}
    ports:
      - "${CLIENT_PORT}:${CLIENT_PORT}"
